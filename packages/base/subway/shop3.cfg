// shop.cfg - newworld

newgui shoppingthree [
	guistayopen [
		guilist [
            guilist [
				guitextbox " " 3 0
				if (!= (inventory1read) 0) [ // brawndo
					guitext (inventory1read) 0
				]
				if (!= (inventory2read) 0) [ // mushroom
					guitext (inventory2read) 0
				]
				if (!= (inventory4read) 0) [ // carrot
					guitext (inventory4read) 0
				]
				if (!= (inventory5read) 0) [ // book
					guitext (inventory5read) 0
				]
				if (!= (inventory6read) 0) [ // winebottle
					guitext (inventory6read) 0
				]
				if (!= (inventory8read) 0) [ // firstaid
					guitext (inventory8read) 0
				]
			]
            guilist [
				guitextbox " " 10 0
				if (!= (inventory1read) 0) [
					mmname = (mapmodelname 1) // Brawndo
					if (= (strstr $mmname "inventory") 0) [
						mmname = (substr $mmname 10)
					]
					guibutton $mmname [
						inventorywrite 1 -1
						inventorywrite 3 2
					] 0
				]
				if (!= (inventory2read) 0) [
					mmname = (mapmodelname 2) // mushroom
					if (= (strstr $mmname "inventory") 0) [
						mmname = (substr $mmname 10)
					]
					guibutton $mmname [
						inventorywrite 2 -1
						inventorywrite 3 4
					] 0
				]
				if (!= (inventory4read) 0) [
					mmname = (mapmodelname 4) // carrot
					if (= (strstr $mmname "inventory") 0) [
						mmname = (substr $mmname 10)
					]
					guibutton $mmname [
						inventorywrite 4 -1
						inventorywrite 3 2
					] 0
				]
				if (!= (inventory5read) 0) [
					mmname = (mapmodelname 5) // book
					if (= (strstr $mmname "inventory") 0) [
						mmname = (substr $mmname 10)
					]
					guibutton $mmname [
						inventorywrite 5 -1
						inventorywrite 3 10
					] 0
				]
				if (!= (inventory6read) 0) [
					mmname = (mapmodelname 6) // winebottle
					if (= (strstr $mmname "inventory") 0) [
						mmname = (substr $mmname 10)
					]
					guibutton $mmname [
						inventorywrite 6 -1
						inventorywrite 3 50
					] 0
				]
				if (!= (inventory8read) 0) [
					mmname = (mapmodelname 8) // firstaid
					if (= (strstr $mmname "inventory") 0) [
						mmname = (substr $mmname 10)
					]
					guibutton $mmname [
						inventorywrite 8 -1
						inventorywrite 3 20
					] 0
				]
            ]
            guibar
            guimodelpreview (mapmodelname (at $guirolloveraction 1)) "mapmodel" [cleargui] 4 1
			guibar
			pmidx = (at $guirolloveraction 1)
			guilist [
				guitextbox " " 10 0
				if (= $pmidx 0) [
					guitextbox "mouseover an item to view its worth, click to sell." 10 6
				]
				if (= $pmidx 1) [
					guitextbox "Sell for 2 credits." 10 6 // Brawndo
				]
				if (= $pmidx 2) [
					guitextbox "Sell for 4 credits." 10 6 // Mushrooms
				]
				if (= $pmidx 5) [
					guitextbox "Sell for 10 credits." 10 6 // Book
				]
				if (= $pmidx 6) [
					guitextbox "Sell for 1 credits." 10 6 // Winebottle
				]
				if (= $pmidx 8) [
					guitextbox "Sell for 50 credits." 10 6 // Firstaid
				]
				if (= $pmidx 9) [
					guitextbox "Sell for 20 credits." 10 6 // Shovel
				]
			]
        ]
		guibar
		if (!= (inventory3read) 0) [
			guitext (concatword "You have " (inventory3read) "credits") 0
		] [
			guitext "You dont have any money"
		]
		guilist [
			guibutton "Close" [cleargui]
		]
		guitab Buy
		guilist [
            guilist [
				guitextbox " " 3 0
				guitext "1" 0
				guitext "1" 0
				guitext "12" 0
			]
            guilist [
				guitextbox " " 10 0
				mmname = (mapmodelname 1) // Brawndo
				if (= (strstr $mmname "inventory") 0) [
					mmname = (substr $mmname 10)
				]
				guibutton $mmname [
					echo "1"
					if (> (inventory3read) 3) [
						inventorywrite 1 1
						inventorywrite 3 -4
					] [
						echo "You dont have enough money"
					]
				] 0
				mmname = (mapmodelname 8) // Firstaid
				if (= (strstr $mmname "inventory") 0) [
					mmname = (substr $mmname 10)
				]
				guibutton $mmname [
					echo "8"
					if (> (inventory3read) 49) [
						inventorywrite 8 1
						inventorywrite 3 -50
					] [
						echo "You dont have enough money"
					]
				] 0
				mmname = (mapmodelname 87) // Cartridges
				if (= (strstr $mmname "ammo") 0) [
					mmname = (substr $mmname 5)
				]
				guibutton $mmname [
					echo "87"
					if (> (inventory3read) 24) [
						inventorywrite 3 -25
						y = (+ (getpistolstat) 12)
						getpistolammo $y
					] [
						echo "You dont have enough money"
					]
				] 0
            ]
            guibar
            guimodelpreview (mapmodelname (at $guirolloveraction 1)) "mapmodel" [cleargui] 4 1
			guibar
			pmidx = (at $guirolloveraction 1)
			guilist [
				guitextbox " " 10 0
				if (= $pmidx 0) [
					guitextbox "mouseover an item to view its worth, click to buy." 10 6
				]
				if (= $pmidx 1) [
					guitextbox "Buy 1 for 4 credits." 10 6 // Brawndo
				]
				if (= $pmidx 8) [
					guitextbox "Buy 1 for 50 credits." 10 6 // Firstaid
				]
				if (= $pmidx 87) [
					guitextbox "Buy 12 for 25 credits." 10 6 // Cartridges
				]
			]
        ]
		guibar
		if (!= (inventory3read) 0) [
			guitext (concatword "You have " (inventory3read) "credits") 0
		] [
			guitext "You dont have any money"
		]
		guilist [
			guibutton "Close" [cleargui]
		]
	]
] 0

