// triggers.cfg - office

keytrigger = [
	if (= (getactivecrosshair) 0) [
		echo "Nothing to see here"
	]
	if (= (getactivecrosshair) 1) [
		getitem
	]
] 

level_trigger_13 = [
	getpistolammo (inventory87read)
	getshotgunammo (inventory88read)
	getrifleammo (inventory89read)
	getglammo (inventory90read)
	getchaingunammo (inventory91read)
	getrlammo (inventory92read)
	logvar = 12
]

item_activate_130 = [ // elevator
	sound 83
]

item_activate_360 = [ // ubuntu pc
	showgui ubuntupc
]

item_activate_102 = [ // Experimental lab
	showgui explabkeypad
]



item_activate_104 = [ // 
	if (= ($burstactive) 1) [
		burstactive = 2
	]
]

level_trigger_14 = [
	if (= ($burstactive) 2) [
		inventoryoverwrite 87 (getpistolstat)
		inventoryoverwrite 88 (getshotgunstat)
		inventoryoverwrite 89 (getriflestat)
		inventoryoverwrite 90 (getglstat)
		inventoryoverwrite 91 (getchaingunstat)
		inventoryoverwrite 92 (getrlstat)
		writegameprogress 7 zetaproject
		map core
	] [
		echo "Experiment failed"
	]
]

////////////////////////////////////////////////////////////////////////////////
// a simple "hacking" script

digit_1 = 1
digit_1_set = 0
digit_2 = 2
digit_2_set = 0
digit_3 = 3
digit_3_set = 0

alias hackerror [
	digit_1_set = 0
	digit_2_set = 0
	digit_3_set = 0
	sound 74
	cleargui
]


newgui explabkeypad [
	guistayopen [
		guitext "Please enter your" 0
		guitext "four digit pincode" 0
		guibar
		guilist [
			guibutton "" [ hackerror ] "7"
			guibutton "" [ hackerror ] "8"
			guibutton "" [ hackerror ] "9"
		]
		guilist [
			guibutton "" [
				if (= $digit_3_set 1) [
					sound 75
					echo "access granted"
					trigger 2 1
					cleargui
				] [	hackerror ]
			] "4"
			guibutton "" [ hackerror ] "5"
			guibutton "" [ hackerror ] "6"
		]
		guilist [
			guibutton "" [
				if (= $digit_1_set 0) [
					digit_1_set = 1
					sound 75
				] [	hackerror ]
			] "1"
			guibutton "" [
				if ((= $digit_1_set 1) && (= $digit_2_set 0)) [
					digit_2_set = 1
					sound 75
				] [	hackerror ]
			] "2"
			guibutton "" [
				if ((= $digit_2_set 1) && (= $digit_3_set 0)) [
					digit_3_set = 1
					sound 75
				] [	hackerror ]
			] "3"
		]
		guilist [
			guibutton "" [echo "Nothing here"] "64x64"
			guibutton "" [ hackerror ] "\0"
			guibutton "" [echo "Nothing here"] "64x64"
		]
		guibar
		guibutton "Clear" [
			digit_1_set = 0
			digit_2_set = 0
			digit_3_set = 0
			cleargui
		]
	]
] 0
